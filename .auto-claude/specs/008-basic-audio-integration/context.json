{
  "task_description": "# Basic Audio Integration\n\nAdd essential sound effects for slashing, monster deaths, combos, and UI interactions to bring the game to life.\n\n## Rationale\nAudio is critical for game feel - the IMPROVEMENT_ROADMAP identifies this as the #1 priority for polish. Silent games feel dead and unengaging.\n\n## User Stories\n- As a player, I want to hear satisfying sounds when I slice monsters so that the action feels impactful\n\n## Acceptance Criteria\n- [ ] Slash swoosh sound plays on each swipe\n- [ ] Monster death sounds play (unique per type)\n- [ ] Combo milestone sounds escalate in intensity\n- [ ] UI button clicks have audio feedback\n- [ ] Audio can be toggled on/off in settings\n",
  "scoped_services": ["main"],
  "files_to_modify": [
    "src/systems/SlashSystem.ts",
    "src/entities/Monster.ts",
    "src/systems/ComboSystem.ts",
    "src/ui/Button.ts",
    "src/scenes/PreloaderScene.ts",
    "src/scenes/GameplayScene.ts"
  ],
  "files_to_reference": [
    "src/managers/AudioManager.ts",
    "src/managers/SaveManager.ts",
    "src/scenes/SettingsScene.ts"
  ],
  "patterns": {
    "audio_playback": "Use AudioManager.playSFX(key, config?) to play sounds. AudioManager is already fully implemented with SFX support.",
    "audio_initialization": "AudioManager is initialized with scene instance: new AudioManager(this), then call initialize() and applySettings()",
    "settings_persistence": "SaveManager already handles audio settings (musicEnabled, sfxEnabled, musicVolume, sfxVolume) in GameSettings type",
    "button_events": "Button.ts triggers callback via onClick config parameter in onRelease() method (line 189-191)",
    "combo_events": "ComboSystem emits 'combo-updated' event via EventBus with count and multiplier",
    "monster_death": "Monster.onSliced() method (line 308) is called when monster dies - add sound trigger here"
  },
  "existing_implementations": {
    "description": "AudioManager already exists with full implementation",
    "relevant_files": [
      "src/managers/AudioManager.ts",
      "src/managers/SaveManager.ts",
      "src/config/types.ts"
    ],
    "key_findings": [
      "AudioManager.playSFX(key, config?) - main method for playing sound effects",
      "AudioManager.playRandomSFX(keys[]) - plays random sound from array",
      "AudioManager.playSFXWithVariation(key, pitchRange) - adds pitch variation",
      "AudioManager.applySettings(settings) - applies GameSettings from SaveManager",
      "AudioManager already handles sfxEnabled toggle, sfxVolume, browser audio unlock",
      "SaveManager has sfxEnabled and sfxVolume in GameSettings type (defaults: sfxEnabled=true, sfxVolume=1.0)",
      "Button.onRelease() triggers callback at line 189-191",
      "ComboSystem.increment() emits 'combo-updated' event at line 31-34",
      "Monster.onSliced() is called when health <= 0 (line 308)",
      "EventBus pattern is used throughout codebase for event communication"
    ]
  },
  "created_at": "2025-12-31T07:14:19.033088"
}
